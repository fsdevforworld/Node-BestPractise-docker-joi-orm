{"version":3,"file":"validator-callback.js","names":["schema","req","res","next","httpRequest","body","query","params","result","Joi","validate","err","BadRequestError"],"sources":["../../../src/middlewares/validator-callback.js"],"sourcesContent":["import Joi from 'joi'\r\nimport { BadRequestError } from '../utils/api-errors'\r\nexport default (schema) => async (req, res, next) => {\r\n  const httpRequest = {\r\n    body: req.body,\r\n    query: req.query,\r\n    params: req.params,\r\n  }\r\n  try {\r\n    const result = await Joi.validate(httpRequest, schema)\r\n\r\n    req.body = result.body\r\n    req.params = result.params\r\n    req.query = result.query\r\n  } catch (err) {\r\n    throw new BadRequestError('invalid request')\r\n  }\r\n\r\n  return next()\r\n}\r\n"],"mappings":";;;;;;;AAAA;;AACA;;;;eACgBA,MAAD,IAAY,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACnD,MAAMC,WAAW,GAAG;IAClBC,IAAI,EAAEJ,GAAG,CAACI,IADQ;IAElBC,KAAK,EAAEL,GAAG,CAACK,KAFO;IAGlBC,MAAM,EAAEN,GAAG,CAACM;EAHM,CAApB;;EAKA,IAAI;IACF,MAAMC,MAAM,GAAG,MAAMC,YAAA,CAAIC,QAAJ,CAAaN,WAAb,EAA0BJ,MAA1B,CAArB;IAEAC,GAAG,CAACI,IAAJ,GAAWG,MAAM,CAACH,IAAlB;IACAJ,GAAG,CAACM,MAAJ,GAAaC,MAAM,CAACD,MAApB;IACAN,GAAG,CAACK,KAAJ,GAAYE,MAAM,CAACF,KAAnB;EACD,CAND,CAME,OAAOK,GAAP,EAAY;IACZ,MAAM,IAAIC,0BAAJ,CAAoB,iBAApB,CAAN;EACD;;EAED,OAAOT,IAAI,EAAX;AACD,C"}